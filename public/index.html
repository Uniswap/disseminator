<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Disseminator API</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            color: #333;
        }
        pre {
            background: #f6f8fa;
            padding: 1rem;
            border-radius: 6px;
            overflow-x: auto;
        }
        code {
            font-family: Monaco, "Courier New", monospace;
        }
        .endpoint {
            margin: 2rem 0;
            padding: 1rem;
            border: 1px solid #e1e4e8;
            border-radius: 6px;
        }
        h2 {
            color: #0366d6;
            margin-top: 2rem;
        }
    </style>
</head>
<body>
    <h1>Disseminator API</h1>
    <p>A WebSocket server implementation that broadcasts messages to both HTTP endpoints and WebSocket clients.</p>

    <h2>Endpoints</h2>

    <div class="endpoint">
        <h3>WebSocket Connection</h3>
        <p>Connect to the WebSocket server to receive real-time broadcast messages:</p>
        <pre><code>wss://compactx-disseminator.com/ws</code></pre>
    </div>

    <div class="endpoint">
        <h3>HTTP Broadcast</h3>
        <p>Send messages to be broadcasted to all connected clients:</p>
        <pre><code>POST https://compactx-disseminator.com/broadcast</code></pre>
        <p>Example request:</p>
        <pre><code>{
    "chainId": "1",
    "compact": {
        "arbiter": "0x1234567890123456789012345678901234567890",
        "sponsor": "0x1234567890123456789012345678901234567890",
        "nonce": "0x1234567890123456789012345678901234567890123456789012345678901234",
        "expires": "1000000",
        "id": "23499701752147396106288076033874150844871292959348239827687418423535067463557",
        "amount": "1000000000000000000",
        "mandate": {
            "chainId": 1,
            "tribunal": "0x1234567890123456789012345678901234567890",
            "recipient": "0x1234567890123456789012345678901234567890",
            "expires": "1000000",
            "token": "0x1234567890123456789012345678901234567890",
            "minimumAmount": "1000000000000000000",
            "baselinePriorityFee": "1000000000",
            "scalingFactor": "1000000000",
            "salt": "0x1234567890123456789012345678901234567890123456789012345678901234"
        }
    },
    "sponsorSignature": null,
    "allocatorSignature": "0x1234567890123456789012345678901234567890123456789012345678901234123456789012345678901234567890123456789012345678901234567890123456",
    "context": {
        "dispensation": "1000000000000000000",
        "dispensationUSD": "$1000.00",
        "spotOutputAmount": "1000000000000000000",
        "quoteOutputAmountDirect": "1000000000000000000",
        "quoteOutputAmountNet": "990000000000000000",
        "deltaAmount": "-95889553740141",
        "witnessTypeString": "test",
        "witnessHash": "0x1234567890123456789012345678901234567890123456789012345678901234",
        "claimHash": "0x1234567890123456789012345678901234567890123456789012345678901234"
    }
}</code></pre>
    </div>

    <div class="endpoint">
        <h3>Response Format</h3>
        <pre><code>{
    "success": true,
    "results": {
        "http": {
            "total": 1,
            "failures": 0
        },
        "websocket": {
            "total": 2,
            "failures": 0
        }
    }
}</code></pre>
    </div>

    <h2>Testing</h2>
    <p>You can test the WebSocket connection using wscat:</p>
    <pre><code>wscat -c wss://compactx-disseminator.com/ws</code></pre>

    <footer style="margin-top: 3rem; padding-top: 1rem; border-top: 1px solid #e1e4e8;">
        <p>For more information, visit the <a href="https://github.com/Uniswap/disseminator">GitHub repository</a>.</p>
    </footer>
</body>
</html>
